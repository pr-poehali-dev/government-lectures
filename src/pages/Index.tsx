import { useState } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from "@/components/ui/accordion";
import { Badge } from "@/components/ui/badge";
import { Progress } from "@/components/ui/progress";
import Icon from '@/components/ui/icon';

interface Lecture {
  id: string;
  title: string;
  category: string;
  duration: string;
  content: string[];
}

const lectures: Lecture[] = [
  {
    id: "1",
    title: "Отделы Правительственного аппарата",
    category: "Организация",
    duration: "15 мин",
    content: [
      "Здравствуйте. Сейчас вам предстоит узнать про структуру отделов Правительства. Пройдемся кратко по отделам.",
      "Сейчас вы состоите в Федеральной Службе Охраны - отдел, занимающийся охраной правопорядка на территории здания Правительства области. Также ФСО занимается сопровождением должностных лиц Правительства в различные командировочные поездки (проверки, надзорная деятельность, адвокатов до ИК или КПЗ УВД). В данный отдел вы попадаете автоматически, вступив в организацию. Глава ФСО - Лосев Александр Максимович.",
      "Далее идут департаменты, в них вы окажитесь с должности инспектор и выше. Всего у нас 3 департамента:",
      "2.1 Департамент здравоохранения - отдел, который занимается служебной деятельностью на территории медицинских ведомств (больница). Их работы заключается в:",
      "а. Надзорная деятельность на территории ведомства;",
      "б. Проведение проверок;",
      "в. Проведение ревизии учреждения;",
      "г. Обнаружение и увольнение / выдача дисциплинарных взысканий некомпетентным сотрудникам больницы.",
      "д. Проведение служебных проверок по жалобам граждан;",
      "е. Подготовка документации для отчётности руководству департамента.",
      "2.2 Департамент внутренних дел - отдел, который занимается служебной деятельностью на территории правоохранительных органов, исправительной колонии. Их работа заключается в:",
      "а. Надзорная деятельность на территории государственного учреждения",
      "в. Проведение ревизии;",
      "г. Обнаружение и увольнение / выдача дисциплинарных взысканий некомпетентным сотрудникам;",
      "д. Проведение служебных проверок по жалобам граждан;",
      "е. Подготовка документации для отчётности руководству департамента.",
      "2.3 Департамент Вооружённых сил - отдел, который занимается служебной деятельностью на территории воинской части, расположенной в пгт. Батырево. Их работа заключается:",
      "а. Надзорная деятельность на территории государственного учреждения",
      "в. Проведение ревизии;",
      "г. Обнаружение и увольнение / выдача дисциплинарных взысканий некомпетентным сотрудникам;",
      "д. Проведение служебных проверок по жалобам граждан;",
      "е. Подготовка документации для отчётности руководству департамента.",
      "На этом лекция подошла к концу."
    ]
  },
  {
    id: "2",
    title: "Использование электрошокера",
    category: "Снаряжение",
    duration: "8 мин",
    content: [
      "Электрошокер - это высокоэффективное средство защиты сотрудника Правительства. Прибор, действие, которого направлено на поражение противника разрядом высокого напряжения.",
      "Электрошокеры применяются:",
      "Для отражения нападения на гражданина или сотрудника",
      "Для пресечения преступления или административного правонарушения",
      "Для пресечения сопротивлению, оказываемого сотруднику Правительства",
      "Для задержания лиц, застигнутого при совершении преступления и пытающего скрыться.",
      "Применение электрошокера регламентировано уставом Правительства статьей 7.",
      "На этом лекция подошла к концу."
    ]
  },
  {
    id: "3",
    title: "Посты охраны",
    category: "Охрана",
    duration: "12 мин",
    content: [
      "У нас имеются следующий список постов, их названия:",
      "А-1 - расположен у левой стороны стойки",
      "А-2 - расположен у правой стороны стойки",
      "Б-1 - расположен у левой стороны двери главного входа",
      "Б-2 - расположен у правой стороны двери главного входа",
      "В-1 - расположен у левой стороны двери в зону для сотрудников",
      "В-2 - расположен у правой стороны двери в зону для сотрудников",
      "Г-1 - расположен у левой двери в кабинет Губернатора НО",
      "Г-2 - расположен у правой двери в кабинет Губернатора НО",
      "Доклады в рацию при охране здания осуществляются следующим образом:",
      '- "Заступил на пост *название поста*, состояние: стабильно."',
      '- "Продолжаю находиться на посту *название поста*, состояние: стабильно."',
      '- "Покинул пост *название поста*, состояние: стабильно."',
      "Пример доклада по охране должностного лица:",
      '- "Начал охрану *должность лица, которого охраняете и его фамилия*."',
      '- "Продолжаю охрану *должность лица, которого охраняете и его фамилия*."',
      '- "Прекратил охрану *должность лица, которого охраняете и его фамилия*."',
      "Лекция на тему посты подошла к концу."
    ]
  },
  {
    id: "4",
    title: "Регламент проведения проверок",
    category: "Процедуры",
    duration: "18 мин",
    content: [
      "Проверка - это служебное мероприятие, проводимое сотрудниками департаментов государственных организаций (ДВС, ДВД, ДЗо). Данное мероприятие проводится для выявления и отстранения не компетентностных сотрудников, выдача дисциплинарных наказаний (при плохих, удовлетворительных оценках) и премий для руководства государственных организаций (при хороших, отличных оценках).",
      "Проверки государственных организаций разрешено проводить Губернаторам, Вице-губернаторам, Главам департаментов Правительственного аппарата (при разрешении Губернатора, Вице-губернатора).",
      "При проведении проверки обязательно должна существовать комиссия, состоящая из председателя комиссии и ее членов.",
      "Принимать участие в проверке разрешено с должности адвокат.",
      "Отчет о проведенной проверке подает исключительно организатор проверки.",
      "На проверке должен присутствовать руководитель, либо заместитель той организации, в которой проводится проверка, либо старший сотрудник на момент начала проверки.",
      "После окончания проверки председатель комиссии оглашает оценку в рацию департамента",
      "Количество внеплановых проверок ограничено до 2-х в неделю;",
      "Запрещено предвзятое отношение на проверках",
      "Запрещено быть некомпетентным (нарушать правила проекта)",
      "Запрещено делать проверку в период обеда, вне рабочего времени",
      "Санкции при выявлении не компетентностных сотрудников: переаттестация, дисциплинарная ответственность, увольнение",
      "На этом лекция подошла к концу."
    ]
  },
  {
    id: "5",
    title: "Предоставление юридических услуг",
    category: "Юридическая помощь",
    duration: "10 мин",
    content: [
      "Каждый адвокат обязан предоставить юридическую помощь гражданину, в случае поступившей просьбы.",
      "Адвокат предоставляет свои юридические услуги на территории ИК. В ИК во время красного режима разрешено являться с 10:00 до 12:00 и с 15:00 до 18:00. При черных режимах запрещен вход на территорию ИК. В обычное время с 10:00 до 21:00. Стоимость 1 попытки 250.000 рублей.",
      "Согласно ФЗ №5, статьи 6.2 адвокату разрешено посещать территорию ИК УФСИН по НО только с целью оказания юридических услуг. Сотрудник, впустивший вас на территорию является ответственным за ваши действия на территории ИК.",
      "На этом лекция окончена."
    ]
  },
  {
    id: "6",
    title: "Рация организации",
    category: "Связь",
    duration: "7 мин",
    content: [
      "Рация - это техническое средство связи с используемая сотрудниками правительственного аппарата в служебных целях.",
      "Запрещается:",
      "Использовать служебную рацию в личных целях;",
      "Проявлять неадекватность при использовании рации, проявлять некомпетентность (нарушать правила сервера);",
      "Запрещено играться с рацией (понятно нажимать кнопку воспроизведения звука);",
      "(существуют 2 вида рации - текстовая /r - IC чат, /rb - OOC чат и голосовая - по умолчанию это буква Z на клавиатуре)",
      "На этом лекция окончена."
    ]
  },
  {
    id: "7",
    title: "Рация департамента",
    category: "Связь",
    duration: "9 мин",
    content: [
      "Рация департамента - это общая рация всех государственных организаций. По ней общаются все государственные учреждения, составляются планы, проверки, объявляют итоги проверок и т.п.",
      "В правительстве области в рацию департамента разрешено говорит с должностью инспектор.",
      "При использовании рации департамента запрещается:",
      "Использовать рацию департамента в личных целях;",
      "Проявлять неадекватность при использовании рации департамента",
      "При обращении следует назвать код своей организации и код организации к которой вы обращаетесь:",
      "Правительство - ПР",
      "УМВД - УМВД",
      "ФСБ - ФСБ",
      "ГАИ - ГАИ",
      "ЕСС - ЕСС",
      "ФСИН - ФСИН",
      "На этом лекция окончена."
    ]
  }
];

const Index = () => {
  const [completedLectures, setCompletedLectures] = useState<string[]>([]);

  const toggleLectureComplete = (id: string) => {
    setCompletedLectures(prev => 
      prev.includes(id) ? prev.filter(lid => lid !== id) : [...prev, id]
    );
  };

  const progress = (completedLectures.length / lectures.length) * 100;

  const categories = Array.from(new Set(lectures.map(l => l.category)));

  return (
    <div className="min-h-screen bg-background">
      <div className="container mx-auto px-4 py-8 max-w-6xl">
        <header className="mb-12 text-center">
          <div className="inline-flex items-center justify-center w-16 h-16 bg-primary rounded-2xl mb-6 shadow-lg">
            <Icon name="GraduationCap" className="text-primary-foreground" size={32} />
          </div>
          <h1 className="text-4xl font-bold text-foreground mb-3">
            Образовательная платформа
          </h1>
          <p className="text-muted-foreground text-lg">
            Лекции для сотрудников Правительственного аппарата
          </p>
        </header>

        <Card className="mb-8 shadow-md">
          <CardHeader>
            <CardTitle className="flex items-center gap-2 text-xl">
              <Icon name="TrendingUp" size={24} />
              Прогресс обучения
            </CardTitle>
            <CardDescription>
              Завершено {completedLectures.length} из {lectures.length} лекций
            </CardDescription>
          </CardHeader>
          <CardContent>
            <Progress value={progress} className="h-3" />
          </CardContent>
        </Card>

        <div className="mb-6">
          <h2 className="text-2xl font-semibold mb-4 flex items-center gap-2">
            <Icon name="BookOpen" size={28} />
            Доступные лекции
          </h2>
          <div className="flex flex-wrap gap-2 mb-6">
            {categories.map(category => (
              <Badge key={category} variant="secondary" className="text-sm px-3 py-1">
                {category}
              </Badge>
            ))}
          </div>
        </div>

        <Accordion type="multiple" className="space-y-4">
          {lectures.map((lecture) => {
            const isCompleted = completedLectures.includes(lecture.id);
            return (
              <AccordionItem 
                key={lecture.id} 
                value={lecture.id}
                className="border rounded-xl overflow-hidden bg-card shadow-sm hover:shadow-md transition-shadow"
              >
                <AccordionTrigger className="px-6 py-4 hover:no-underline hover:bg-muted/50 transition-colors">
                  <div className="flex items-start gap-4 text-left w-full">
                    <div className="flex-shrink-0 mt-1">
                      <div 
                        onClick={(e) => {
                          e.stopPropagation();
                          toggleLectureComplete(lecture.id);
                        }}
                        className={`w-6 h-6 rounded-full border-2 flex items-center justify-center cursor-pointer transition-all ${
                          isCompleted 
                            ? 'bg-primary border-primary' 
                            : 'border-muted-foreground hover:border-primary'
                        }`}
                      >
                        {isCompleted && (
                          <Icon name="Check" size={16} className="text-primary-foreground" />
                        )}
                      </div>
                    </div>
                    <div className="flex-1">
                      <h3 className="font-semibold text-lg mb-2 text-card-foreground">
                        {lecture.title}
                      </h3>
                      <div className="flex flex-wrap gap-2 items-center text-sm text-muted-foreground">
                        <Badge variant="outline" className="font-normal">
                          {lecture.category}
                        </Badge>
                        <span className="flex items-center gap-1">
                          <Icon name="Clock" size={14} />
                          {lecture.duration}
                        </span>
                      </div>
                    </div>
                  </div>
                </AccordionTrigger>
                <AccordionContent className="px-6 pb-6 pt-2">
                  <div className="space-y-3 text-card-foreground leading-relaxed">
                    {lecture.content.map((paragraph, idx) => (
                      <p key={idx} className="text-sm">
                        {paragraph}
                      </p>
                    ))}
                  </div>
                </AccordionContent>
              </AccordionItem>
            );
          })}
        </Accordion>

        <footer className="mt-12 text-center text-muted-foreground text-sm">
          <p>© {new Date().getFullYear()} Правительственный аппарат. Все права защищены.</p>
        </footer>
      </div>
    </div>
  );
};

export default Index;
